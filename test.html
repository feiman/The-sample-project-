<!DOCTYPE>
<html>
    <head>
        <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.1.4.min.js">
        </script>
        <title></title>
    </head>
    <body>
        <!-- <video src="20180206_113213_2176.mp4" preload="metadata" onloadeddata='vload(this)' poster="加载动画.gif">
        </video> -->
        <video src="20180206_113213_2176.mp4" preload="metadata" onloadeddata='vload(this)'>
        </video>
    </body>
    <script type="text/javascript">//--获取视频缩略图--
        function vload(obj) {
            console.log(obj)
            $(obj).removeAttr("poster");
            var vimg = $("<img/>")[0];
            console.log(vimg)
            captureImage(obj, vimg);
            $(obj).after(vimg);
            $(obj).remove();
        };
        var scale = 0.8; //缩放
        function captureImage(video, output) { //截图 
            try {
                // video 对象   output img对象
                var videocanvas = $("<canvas/>")[0];
                videocanvas.width = video.videoWidth * scale;
                videocanvas.height = video.videoHeight * scale;
                videocanvas.getContext('2d').drawImage(video, 0, 0, videocanvas.width, videocanvas.height);
                // videocanvas.toDataURL("image/png") // img base64 数据
                console.log(videocanvas.toDataURL("image/png"))
                output.src = videocanvas.toDataURL("image/png");
                delete videocanvas;
            } catch(e) {
                output.src = "加载动画.gif";
            }

        };
        //--获取视频缩略图--
        </script>
</html>